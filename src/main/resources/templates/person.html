<!-- Copyright (c) 2019-2020 十三 all rights reserved. -->
<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head th:replace="user/header::head-fragment('艺术画展商城-个人中心','personal')">
</head>
<link th:href="@{/asserts/mall/css/bootstrap-modal.css}" rel="stylesheet">
<link rel="stylesheet" th:href="@{/asserts/mall/css/iconfont.css}" />
<link rel="stylesheet" th:href="@{/asserts/mall/css/common.css}" />
<link rel="stylesheet" th:href="@{/asserts/mall/styles/header.css}" />
<link rel="stylesheet" th:href="@{/asserts/mall/styles/cart.css}" />
<link rel="stylesheet" th:href="@{/asserts/admin/plugins/sweetalert/sweetalert.css}"/>
<body>

<!-- nav -->
<nav th:replace="user/header::nav-fragment"></nav>

<!-- personal -->
<div id="personal">
    <div class="self-info center">

        <!-- sidebar -->
        <div th:replace="user/personal-sidebar::sidebar-fragment"></div>

        <div class="intro fr" th:each="user:${user}">
            <div class="grzlbt ml40">我的资料 <a href="/return" style="color:#1baeae;font-size: 20px;" >返回>></a><a href="javascript:openUpdateModal();"
                                             style="color:#1baeae;margin-left: 600px;">更改个人信息</a>
            </div>
            <div class="info_item ml40"><span>用户ID</span><span
                    th:text="${user.username}">newbee-mall</span>

            </div>
            <div class="info_item ml40"><span>用户密码</span><span
                    th:text="${user.password}">newbee-mall</span>

            </div>
            <!--<input style="font-size: 15px; " th:value="     '用户密码 :  '+${user.password}"/>-->
            <div class="info_item ml40"><span>用户角色</span><span th:text="${user.power}"></span>
            </div>

        </div>
        <div class="clear"></div>
    </div>
    <div class="content">
        <div class="modal fade" id="personalInfoModal" tabindex="-1" role="dialog"
             aria-labelledby="personalInfoModalLabel">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h6 class="modal-title" id="personalInfoModalLabel">密码修改</h6>
            </div>
            <form th:action="@{/personUpdatePass}">
            <div class="modal-body">
                    <div class="form-group">
                        <input type="hidden" id="userId" th:value="${user.username}" name="username">
                        <label for="address" class="control-label">新的密码：</label>
                        <input type="text" class="form-control" id="address" name="password"
                                 th:onblur="'updateItem()'"
                               placeholder="请输入密码" th:value="correct"
                               required="true">
                    </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">取消</button>
                <button type="submit" class="btn btn-primary" id="saveButton">确认</button>
            </div>
            </form>
        </div>
    </div>
    </div>
    </div>
</div>
<script th:src="@{asserts/admin/plugins/jquery/jquery.min.js}"></script>
<!-- Bootstrap 3 -->
<script th:src="@{asserts/mall/js/bootstrap3.js}"></script>
<script th:src="@{asserts/mall/js/search.js}" type="text/javascript"></script>
<script th:src="@{asserts/admin/plugins/sweetalert/sweetalert.min.js}"></script>
<script type="text/javascript">
    function openUpdateModal() {
        $('#personalInfoModal').modal('show');
    }
    //绑定modal上的保存按钮
    // $('#saveButton').click(function () {
    //     var address = $("#address").val();
    //     if (address.trim().length < 5) {
    //         swal("请输入正确的密码", {
    //             icon: "error",
    //         });
    //        return;
    //     }
    // });


    function updateItem() {
        let val = $('#address').val();
        if (val.length < 6)
            alert("长度必须大于6");
        else if ( val.length > 16)
            alert("长度必须小于16");
        else
            return ;

    }


</script>

</body>
</html>


